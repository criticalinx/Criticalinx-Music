(()=>{var e={};e.id=676,e.ids=[676],e.modules={2213:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=2213,e.exports=r},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9080:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>u,routeModule:()=>x,tree:()=>c});var s=t(3137),a=t(4647),i=t(4183),l=t.n(i),n=t(1775),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d=s.AppPageRouteModule,c=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7085)),"C:\\Users\\lance\\iCloudDrive\\2025\\Criticalinx\\project-bolt-sb1-4nlhfzvo\\project\\app\\upload\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8144)),"C:\\Users\\lance\\iCloudDrive\\2025\\Criticalinx\\project-bolt-sb1-4nlhfzvo\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1918,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\lance\\iCloudDrive\\2025\\Criticalinx\\project-bolt-sb1-4nlhfzvo\\project\\app\\upload\\page.tsx"],p="/upload/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new d({definition:{kind:a.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1800:(e,r,t)=>{Promise.resolve().then(t.bind(t,2674))},2674:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>q});var s=t(80),a=t(9885),i=t(6253),l=t(6206),n=t(6315),o=t(4588),d=t(7052),c=t(9424),u=t(3478),p=t(6466),m=t(8384),x=t(58),h=t(9458),f=t(4678),v=t(1264),j=t(3161);let g=x.fC;x.ZA;let y=x.B4,b=a.forwardRef(({className:e,children:r,...t},a)=>(0,s.jsxs)(x.xz,{ref:a,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,s.jsx(x.JO,{asChild:!0,children:s.jsx(h.Z,{className:"h-4 w-4 opacity-50"})})]}));b.displayName=x.xz.displayName;let N=a.forwardRef(({className:e,...r},t)=>s.jsx(x.u_,{ref:t,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(f.Z,{className:"h-4 w-4"})}));N.displayName=x.u_.displayName;let w=a.forwardRef(({className:e,...r},t)=>s.jsx(x.$G,{ref:t,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(h.Z,{className:"h-4 w-4"})}));w.displayName=x.$G.displayName;let k=a.forwardRef(({className:e,children:r,position:t="popper",...a},i)=>s.jsx(x.h_,{children:(0,s.jsxs)(x.VY,{ref:i,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:[s.jsx(N,{}),s.jsx(x.l_,{className:(0,j.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),s.jsx(w,{})]})}));k.displayName=x.VY.displayName;let C=a.forwardRef(({className:e,...r},t)=>s.jsx(x.__,{ref:t,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r}));C.displayName=x.__.displayName;let _=a.forwardRef(({className:e,children:r,...t},a)=>(0,s.jsxs)(x.ck,{ref:a,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(x.wU,{children:s.jsx(v.Z,{className:"h-4 w-4"})})}),s.jsx(x.eT,{children:r})]}));_.displayName=x.ck.displayName;let P=a.forwardRef(({className:e,...r},t)=>s.jsx(x.Z0,{ref:t,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",e),...r}));P.displayName=x.Z0.displayName;var z=t(7502),I=t(2730);let S=(0,I.createClient)("https://hxyekdcwuyznriecokza.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4eWVrZGN3dXl6bnJpZWNva3phIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0MTYwODcsImV4cCI6MjA4MDk5MjA4N30.RAKtCmg7zsKQHMp0G9FWio2vfFQazrtsMSlqgPINb4I",{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});function q(){let[e,r]=(0,a.useState)(null),[t,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[C,P]=(0,a.useState)(""),[I,q]=(0,a.useState)("0.00"),D=(0,a.useRef)(null),{toast:M}=(0,z.pm)(),Z=e=>{let t=e.target.files?.[0];if(t){if(!["audio/mpeg","audio/wav","audio/flac","audio/mp3"].includes(t.type)&&!t.name.match(/\.(mp3|wav|flac)$/i)){M({title:"Invalid file type",description:"Please upload an MP3, WAV, or FLAC file.",variant:"destructive"});return}if(t.size>524288e3){M({title:"File too large",description:"Please upload a file smaller than 500MB.",variant:"destructive"});return}r(t)}},F=()=>{r(null),D.current&&(D.current.value="")},A=async t=>{if(!e||!h){M({title:"Missing information",description:"Please provide a file and track title.",variant:"destructive"});return}x(!0);try{let{data:{user:s}}=await S.auth.getUser();if(!s){M({title:"Authentication required",description:"Please sign in to upload tracks.",variant:"destructive"}),x(!1);return}let a=e.name.split(".").pop(),i=`${s.id}-${Date.now()}.${a}`,l=`tracks/${i}`,{error:n}=await S.storage.from("audio").upload(l,e);if(n)throw n;let{error:o}=await S.from("tracks").insert({title:h,description:v,genre:N,vibe:C,price:parseFloat(I),file_path:l,artist_id:s.id,status:t?"draft":"published"});if(o)throw o;M({title:t?"Draft saved":"Track published",description:t?"Your track has been saved as a draft.":"Your track is now live!"}),r(null),f(""),j(""),w(""),P(""),q("0.00"),D.current&&(D.current.value="")}catch(e){M({title:"Upload failed",description:e instanceof Error?e.message:"An error occurred during upload.",variant:"destructive"})}finally{x(!1)}};return s.jsx("div",{className:"container section-padding max-w-4xl",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{children:"Upload Track"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Share your positive music with the world. Keep 99% of revenue."})]}),(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[s.jsx(d.ll,{children:"Track Details"}),s.jsx(d.SZ,{children:"Upload your audio file and add information about your track."})]}),(0,s.jsxs)(d.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{onDrop:e=>{e.preventDefault();let r=e.dataTransfer.files?.[0];r&&Z({target:{files:[r]}})},onDragOver:e=>{e.preventDefault()},onClick:()=>D.current?.click(),className:"border-2 border-dashed rounded-lg p-12 text-center space-y-4 hover:border-primary/50 transition-colors cursor-pointer",children:[s.jsx("input",{ref:D,type:"file",accept:"audio/mpeg,audio/wav,audio/flac,.mp3,.wav,.flac",onChange:Z,className:"hidden"}),e?(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto",children:s.jsx(i.Z,{className:"h-8 w-8 text-green-500"})}),s.jsx("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.size/1048576).toFixed(2)," MB"]}),(0,s.jsxs)(m.z,{type:"button",variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),F()},children:[s.jsx(l.Z,{className:"h-4 w-4 mr-1"}),"Remove"]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:s.jsx(n.Z,{className:"h-8 w-8 text-primary"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium",children:"Drop your audio file here"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to browse"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supports MP3, WAV, FLAC (max 500MB)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u._,{htmlFor:"title",children:"Track Title *"}),s.jsx(c.I,{id:"title",placeholder:"Enter track title",value:h,onChange:e=>f(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u._,{htmlFor:"description",children:"Description"}),s.jsx(p.g,{id:"description",placeholder:"Tell us about your track...",rows:4,value:v,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u._,{htmlFor:"genre",children:"Genre"}),(0,s.jsxs)(g,{value:N,onValueChange:w,children:[s.jsx(b,{id:"genre",children:s.jsx(y,{placeholder:"Select genre"})}),(0,s.jsxs)(k,{children:[s.jsx(_,{value:"pop",children:"Pop"}),s.jsx(_,{value:"rock",children:"Rock"}),s.jsx(_,{value:"electronic",children:"Electronic"}),s.jsx(_,{value:"acoustic",children:"Acoustic"}),s.jsx(_,{value:"hip-hop",children:"Hip Hop"}),s.jsx(_,{value:"indie",children:"Indie"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u._,{htmlFor:"vibe",children:"Vibe"}),(0,s.jsxs)(g,{value:C,onValueChange:P,children:[s.jsx(b,{id:"vibe",children:s.jsx(y,{placeholder:"Select vibe"})}),(0,s.jsxs)(k,{children:[s.jsx(_,{value:"energetic",children:"Energetic"}),s.jsx(_,{value:"chill",children:"Chill"}),s.jsx(_,{value:"motivational",children:"Motivational"}),s.jsx(_,{value:"peaceful",children:"Peaceful"}),s.jsx(_,{value:"joyful",children:"Joyful"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u._,{htmlFor:"price",children:"Price (USD)"}),s.jsx(c.I,{id:"price",type:"number",placeholder:"0.00",step:"0.01",min:"0",value:I,onChange:e=>q(e.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Set to $0.00 for free streaming. You keep 99% of paid sales."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[s.jsx(m.z,{variant:"outline",className:"flex-1",onClick:()=>A(!0),disabled:t,children:"Save as Draft"}),(0,s.jsxs)(m.z,{className:"flex-1 bg-primary",onClick:()=>A(!1),disabled:t,children:[s.jsx(o.Z,{className:"h-4 w-4 mr-2"}),t?"Uploading...":"Publish Track"]})]})]})]})]})})}},6466:(e,r,t)=>{"use strict";t.d(r,{g:()=>l});var s=t(80),a=t(9885),i=t(3161);let l=a.forwardRef(({className:e,...r},t)=>s.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...r}));l.displayName="Textarea"},7085:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=t(7536);let a=(0,s.createProxy)(String.raw`C:\Users\lance\iCloudDrive\2025\Criticalinx\project-bolt-sb1-4nlhfzvo\project\app\upload\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[933,284,666,620,841,414],()=>t(9080));module.exports=s})();